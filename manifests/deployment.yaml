apiVersion: v1
kind: Pod
metadata:
  name: csgo-test
  labels:
    app: csgo-test
spec:
  nodeName: "161739"
  securityContext:
    runAsUser: 1000
    runAsGroup: 1000
    fsGroup: 1000
  containers:
  - image: timche/csgo
    name: csgo-test
    env:
    - name: CSGO_DISABLE_BOTS
      value: "true"
    volumeMounts:
    - mountPath: /home/csgo/server
      name: csgo-volume
  volumes:
  - name: csgo-volume
    hostPath:
      # directory location on host
      path: /home/npfuser
      # this field is optional
      type: Directory
---
apiVersion: v1
kind: Service
metadata:
  name: csgo-test
spec:
  selector:
    app: csgo-test
  ports:
    - protocol: TCP
      port: 27015
      targetPort: 27015
---
apiVersion: v1
kind: Service
metadata:
  name: csgo-test
spec:
  selector:
    app: csgo-test
  ports:
    - name: gametcp
      protocol: TCP
      port: 27015
      targetPort: 27015
    - name: gameudp
      protocol: UDP
      port: 27015
      targetPort: 27015
    - name: matchandhltvtcp
      protocol: TCP
      port: 27020
      targetPort: 27020
    - name: matchandhltvudp
      protocol: UDP
      port: 27020
      targetPort: 27020
